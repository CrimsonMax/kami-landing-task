const mainContainer=document.querySelector(".max-slider");let sliderContainer=document.querySelector(".max-slider__images-container"),myImages=document.querySelectorAll(".max-slider__image");const dotsContainer=document.querySelector(".max-slider__dots-container"),leftButton=document.querySelector(".max-slider__arrow-left"),rightButton=document.querySelector(".max-slider__arrow-right");let containerWidth,sliderLength=myImages.length,dragSensitivity=.2,timer=3e3;myImages.forEach(e=>{let t=document.createElement("div");t.classList.add("max-slider__dot"),t.dataset.dot=e.dataset.item,e.classList.contains("max-slider__image--active")&&t.classList.add("max-slider__dot--active"),dotsContainer.appendChild(t)});const sliderAppearing=()=>{let e;containerWidth=mainContainer.offsetWidth,document.querySelectorAll(".max-slider__image").forEach(e=>e.style.setProperty("width",containerWidth+"px")),document.querySelectorAll(".max-slider__dot").forEach((t,i)=>{t.classList.contains("max-slider__dot--active")&&(e=i)}),properWidth=containerWidth*(sliderLength+4),sliderContainer.classList.remove("max-slider__images-container--transition"),sliderContainer.style.setProperty("width",properWidth+"px"),sliderContainer.style.setProperty("left",-containerWidth*(e+2)+"px")};function kamino(){const e=myImages[0],t=myImages[1],i=myImages[sliderLength-1],n=myImages[sliderLength-2],a=e.cloneNode(!0),o=t.cloneNode(!0),s=i.cloneNode(!0),r=n.cloneNode(!0);a.classList.add("clone"),o.classList.add("clone"),s.classList.add("clone"),r.classList.add("clone"),sliderContainer.appendChild(o),sliderContainer.insertBefore(a,o),sliderContainer.insertBefore(s,e),sliderContainer.insertBefore(r,s)}function addActive(){myImages.forEach((e,t)=>{sliderContainer.style.left===-containerWidth*(t+2)+"px"?e.classList.add("max-slider__image--active"):e.classList.remove("max-slider__image--active")}),dotsContainer.querySelectorAll(".max-slider__dot").forEach(e=>{3===document.querySelectorAll(".max-slider__image--active").length?e.dataset.dot===document.querySelectorAll(".max-slider__image--active")[1].dataset.item?e.classList.add("max-slider__dot--active"):e.classList.remove("max-slider__dot--active"):e.dataset.dot===document.querySelector(".max-slider__image--active").dataset.item?e.classList.add("max-slider__dot--active"):e.classList.remove("max-slider__dot--active")})}function checkSliderEnd(){sliderContainer.offsetLeft>=-containerWidth&&(sliderContainer.classList.remove("max-slider__images-container--transition"),sliderContainer.offsetLeft>-containerWidth?sliderContainer.style.left=-containerWidth*sliderLength+"px":sliderContainer.style.left=-containerWidth*(sliderLength+1)+"px",addActive()),sliderContainer.offsetLeft<=-containerWidth*(sliderLength+2)&&(sliderContainer.classList.remove("max-slider__images-container--transition"),sliderContainer.offsetLeft<-containerWidth*(sliderLength+2)?sliderContainer.style.left=3*-containerWidth+"px":sliderContainer.style.left=2*-containerWidth+"px",addActive())}function leftMove(){sliderContainer.classList.add("max-slider__images-container--transition"),sliderContainer.offsetLeft%containerWidth==0&&(sliderContainer.style.left=sliderContainer.offsetLeft-containerWidth+"px",addActive())}function rightMove(){sliderContainer.classList.add("max-slider__images-container--transition"),sliderContainer.offsetLeft%containerWidth==0&&(sliderContainer.style.left=sliderContainer.offsetLeft+containerWidth+"px",addActive())}function activateSlide(e){"max-slider__dot"===e.target.classList.value&&(sliderContainer.classList.add("max-slider__images-container--transition"),e.target.parentElement.querySelectorAll(".max-slider__dot").forEach(e=>{e.classList.remove("max-slider__dot--active")}),myImages.forEach((t,i)=>{t.dataset.item===e.target.dataset.dot?t.classList.add("max-slider__image--active"):t.classList.remove("max-slider__image--active"),t.classList.contains("max-slider__image--active")&&(sliderContainer.style.left=-containerWidth*(i+2)+"px",e.target.classList.add("max-slider__dot--active"))}))}let startYposition,startXposition,nextXposition,initialSliderPosition,finalSliderPosition;sliderAppearing(),window.addEventListener("resize",sliderAppearing),kamino(),leftButton.addEventListener("click",rightMove),rightButton.addEventListener("click",leftMove),dotsContainer.addEventListener("click",activateSlide),sliderContainer.addEventListener("transitionend",checkSliderEnd);let position=0;function dragStart(e){checkSliderEnd(),sliderContainer.classList.remove("max-slider__images-container--transition"),initialSliderPosition=sliderContainer.offsetLeft,"touchstart"===e.type?(startXposition=e.touches[0].clientX,startYposition=e.touches[0].clientY):(startXposition=e.clientX,startYposition=e.clientY,document.onmouseup=dragEnd,document.onmousemove=dragMove)}function dragMove(e){if("touchmove"===e.type){if(Math.round(e.touches[0].clientY)<=Math.round(startYposition)-10||Math.round(e.touches[0].clientY)>=Math.round(startYposition)+10)return;nextXposition=startXposition-e.touches[0].clientX,startXposition=e.touches[0].clientX}else nextXposition=startXposition-e.clientX,startXposition=e.clientX;e.cancelable&&e.preventDefault(),sliderContainer.style.left=sliderContainer.offsetLeft-nextXposition+"px"}function dragEnd(){finalSliderPosition=sliderContainer.offsetLeft,sliderContainer.classList.add("max-slider__images-container--transition"),position=finalSliderPosition-initialSliderPosition,position<containerWidth*-dragSensitivity?(sliderContainer.style.left=sliderContainer.offsetLeft-position-containerWidth+"px",addActive()):position>containerWidth*dragSensitivity?(sliderContainer.style.left=sliderContainer.offsetLeft-position+containerWidth+"px",addActive()):sliderContainer.style.left=initialSliderPosition+"px",document.onmouseup=null,document.onmousemove=null}function autoPlay(e){setInterval(e,timer)}sliderContainer.addEventListener("mousedown",dragStart),sliderContainer.addEventListener("touchstart",dragStart),sliderContainer.addEventListener("touchmove",dragMove),sliderContainer.addEventListener("touchend",dragEnd);const modalBtn=document.querySelector(".nav__btn"),modalBg=document.querySelector(".modal-bg"),modalClose=document.querySelector(".modal__close-icon"),body=document.querySelector("body"),addClass=()=>modalBg.classList.add("bg-active"),overflowOff=()=>body.classList.add("modal-on"),removeClass=()=>modalBg.classList.remove("bg-active"),overflowOn=()=>body.classList.remove("modal-on"),modalOn=()=>{modalBg.classList.add("bg-active"),body.classList.add("modal-on")},modalOff=()=>{modalBg.classList.remove("bg-active"),body.classList.remove("modal-on")};modalBtn.addEventListener("click",modalOn),modalClose.addEventListener("click",modalOff);